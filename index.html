<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smash & Co.</title>
  <link rel="icon" type="image/png" href="logo.png" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    .flying-img {
      position: fixed;
      z-index: 2000;
      width: 120px;
      height: 120px;
      border-radius: 8px;
      object-fit: cover;
      pointer-events: none;
      transition: transform 0.9s ease-in-out, opacity 0.9s ease-in-out;
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-container img {
      width: 45px;
      height: 45px;
      border-radius: 8px;
      object-fit: cover;
    }

    .about-section {
      background-image: url('background.jpg');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center top;
      height: 75vh;
      overflow: hidden;
      color: white;
      text-align: center;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      padding: 80px 20px 0;
      position: relative;
      margin-top: 40px;
    }

    .about-section::before {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.55);
      z-index: 0;
    }

    .about-content {
      position: relative;
      z-index: 1;
      max-width: 800px;
      text-shadow: 1px 1px 4px rgba(0,0,0,0.6);
    }

    .cart-panel input[type="text"],
    .cart-panel input[type="tel"],
    .cart-panel textarea {
      width: 100%;
      box-sizing: border-box;
      margin: 6px 0;
      padding: 8px 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 0.95rem;
    }

    .cart-panel .small-row {
      display: flex;
      gap: 8px;
    }

    .cart-panel .small-row input {
      flex: 1;
    }
  </style>
</head>

<body>
  <header>
    <div class="logo-container">
      <img src="logo.png" alt="Smash & Co. Logo" />
      <h1>Smash & Co.</h1>
    </div>
    <input type="text" id="search" placeholder="Search menu..." />
    <div class="cart" onclick="toggleCart()">üõí <span id="cart-count">0</span></div>
  </header>

  <main>
    <div class="menu-tabs">
      <button id="burger-btn" class="active" onclick="showMenu('burger')">Burger Menu</button>
      <button id="set-btn" onclick="showMenu('set')">Set Menu</button>
    </div>

    <section id="menu-section">
      <div class="menu" id="menu-container"></div>
    </section>
  </main>

  <!-- About Us -->
  <section class="about-section">
    <div class="about-content">
      <h2>About Us</h2>
      <p>
        At <strong>Smash & Co.</strong>, we serve freshly smashed burgers made with passion, 
        quality ingredients, and a local twist that keeps you coming back for more. 
        We believe great food brings people together ‚Äî and that‚Äôs what we do best!
      </p>
      <div class="social-icons">
        <a href="https://www.instagram.com/smashandco.business?igsh=MTYya3I5bWV2YjJwYw==" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://www.tiktok.com/@smashandco..busin?_r=1&_t=ZS-917pP21VWvl" target="_blank"><i class="fab fa-tiktok"></i></a>
        <a href="https://www.facebook.com/profile.php?id=61583175069377" target="_blank"><i class="fab fa-facebook"></i></a>
      </div>
    </div>
  </section>

  <!-- CART PANEL -->
  <div class="cart-panel" id="cart-panel">
    <div class="cart-header">
      <h3>Your Order</h3>
      <span class="close-cart" onclick="toggleCart()">‚ùå</span>
    </div>
    <ul id="cart-items"></ul>
    <p><strong>Total: RM <span id="cart-total">0.00</span></strong></p>

    <!-- Customer Info -->
    <div class="small-row">
      <input type="text" id="customer-name" placeholder="Your name (required)" />
      <input type="tel" id="customer-phone" placeholder="Phone number (required)" />
    </div>

    <textarea id="remarks" placeholder="Remarks (optional)..."></textarea>
    <button class="checkout-btn" onclick="checkout()">Proceed to Payment</button>
  </div>

  <script>
    const burgerMenu = [
      { name: "Smash Ayam", price: 6.90, img: "1.png" },
      { name: "Smash Daging", price: 7.90, img: "2.png" },
      { name: "Smash Ayam Cheese", price: 7.90, img: "3.png" },
      { name: "Smash Daging Cheese", price: 8.90, img: "4.png" },
      { name: "Smash Ayam Special", price: 8.90, img: "5.png" },
      { name: "Benjo", price: 4.00, img: "6.png" },
      { name: "Smash Daging Special", price: 9.90, img: "7.png" },
      { name: "Smash Double Daging Cheese", price: 10.90, img: "8.png" },
    ];

    const setMenu = [
      { name: "Smash Ayam & Fries", price: 7.90, img: "9.png" },
      { name: "Smash Daging & Fries", price: 8.90, img: "10.png" },
      { name: "Smash Ayam Special & Fries", price: 9.90, img: "11.png" },
      { name: "Smash Daging Special & Fries", price: 10.90, img: "12.png" },
    ];

    const cart = [];

    function renderMenu(menuArray) {
      const container = document.getElementById("menu-container");
      container.innerHTML = "";
      menuArray.forEach(item => {
        const div = document.createElement("div");
        div.classList.add("menu-item");
        div.innerHTML = `
          <img src="${item.img}" alt="${item.name}" class="menu-img" />
          <h4>${item.name}</h4>
          <p>RM ${item.price.toFixed(2)}</p>
          <button onclick='addToCart("${item.name}", ${item.price}, "${item.img}", this)'>Add to Cart</button>
        `;
        container.appendChild(div);
      });
    }

    function addToCart(name, price, imgSrc, btn) {
      cart.push({ name, price });
      updateCart();
      animateToCart(btn, imgSrc);
    }

    function animateToCart(button, imgSrc) {
      const cartIcon = document.querySelector('.cart');
      const img = document.createElement('img');
      img.src = imgSrc;
      img.classList.add('flying-img');
      document.body.appendChild(img);

      const start = button.getBoundingClientRect();
      const end = cartIcon.getBoundingClientRect();

      img.style.left = start.left + 'px';
      img.style.top = start.top + 'px';

      requestAnimationFrame(() => {
        img.style.transform = `translate(${end.left - start.left}px, ${end.top - start.top}px) scale(0.1)`;
        img.style.opacity = 0;
      });

      setTimeout(() => img.remove(), 900);
    }

    function removeItem(index) {
      cart.splice(index, 1);
      updateCart();
    }

    function updateCart() {
      document.getElementById("cart-count").textContent = cart.length;
      const cartItems = document.getElementById("cart-items");
      cartItems.innerHTML = "";
      let total = 0;
      cart.forEach((item, index) => {
        total += item.price;
        const li = document.createElement("li");
        li.innerHTML = `${item.name} - RM ${item.price.toFixed(2)} 
          <button class="remove-btn" onclick="removeItem(${index})">X</button>`;
        cartItems.appendChild(li);
      });
      document.getElementById("cart-total").textContent = total.toFixed(2);
    }

    function toggleCart() {
      document.getElementById("cart-panel").classList.toggle("show");
    }

    // ‚úÖ PLAN B ‚Äî Redirect ke payment_qr.html
    function checkout() {
      if (cart.length === 0) return alert("Cart is empty!");

      const customerName = document.getElementById("customer-name").value.trim();
      const customerPhone = document.getElementById("customer-phone").value.trim();
      if (!customerName || !customerPhone) {
        return alert("Please enter your name and phone number before checkout.");
      }

      const remarks = document.getElementById("remarks").value.trim();
      const total = cart.reduce((sum, i) => sum + i.price, 0).toFixed(2);
      const orderDetails = cart.map(i => `${i.name} - RM ${i.price.toFixed(2)}`).join("\n");

      const orderData = {
        customer_name: customerName,
        customer_phone: customerPhone,
        remarks,
        total,
        orderDetails
      };
      localStorage.setItem("smashOrder", JSON.stringify(orderData));

      // ‚úÖ redirect ke payment_qr.html
      window.location.href = "payment_qr.html";
    }

    function showMenu(type) {
      document.getElementById("burger-btn").classList.remove("active");
      document.getElementById("set-btn").classList.remove("active");
      if (type === "burger") {
        document.getElementById("burger-btn").classList.add("active");
        renderMenu(burgerMenu);
      } else {
        document.getElementById("set-btn").classList.add("active");
        renderMenu(setMenu);
      }
    }

    document.getElementById("search").addEventListener("input", (e) => {
      const term = e.target.value.toLowerCase();
      const active = document.querySelector(".menu-tabs button.active").id;
      const currentMenu = active === "burger-btn" ? burgerMenu : setMenu;
      const filtered = currentMenu.filter(i => i.name.toLowerCase().includes(term));
      renderMenu(filtered);
    });

    renderMenu(burgerMenu);
  </script>
</body>
</html>
