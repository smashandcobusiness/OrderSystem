<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smash & Co.</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Smash & Co.</h1>
    <input type="text" id="search" placeholder="Search menu..." />
    <div class="cart" onclick="toggleCart()">üõí <span id="cart-count">0</span></div>
  </header>

  <main>
    <div class="menu-tabs">
      <button id="burger-btn" class="active" onclick="showMenu('burger')">Burger Menu</button>
      <button id="set-btn" onclick="showMenu('set')">Set Menu</button>
    </div>

    <section id="menu-section">
      <div class="menu" id="menu-container"></div>
    </section>
  </main>

  <div class="cart-panel" id="cart-panel">
    <div class="cart-header">
      <h3>Your Order</h3>
      <span class="close-cart" onclick="toggleCart()">‚ùå</span>
    </div>
    <ul id="cart-items"></ul>
    <p><strong>Total: RM <span id="cart-total">0.00</span></strong></p>
    <textarea id="remarks" placeholder="Remarks (e.g. no cheese, extra sauce)..."></textarea>
    <button class="checkout-btn" onclick="checkout()">Checkout via WhatsApp</button>
  </div>

  <script>
    const burgerMenu = [
      { name: "Smash Ayam", price: 6.90, img: "1.png" },
      { name: "Smash Daging", price: 7.90, img: "2.png" },
      { name: "Smash Ayam Cheese", price: 7.90, img: "3.png" },
      { name: "Smash Daging Cheese", price: 8.90, img: "4.png" },
      { name: "Smash Ayam Special", price: 8.90, img: "5.png" },
      { name: "Benjo", price: 4.00, img: "6.png" },
      { name: "Smash Daging Special", price: 9.90, img: "7.png" },
      { name: "Smash Double Daging Cheese", price: 10.90, img: "8.png" },
    ];

    const setMenu = [
      { name: "Smash Ayam & Fries", price: 7.90, img: "9.png" },
      { name: "Smash Daging & Fries", price: 8.90, img: "10.png" },
      { name: "Smash Ayam Special & Fries", price: 9.90, img: "11.png" },
      { name: "Smash Daging Special & Fries", price: 10.90, img: "12.png" },
    ];

    const cart = [];

    function renderMenu(menuArray) {
      const container = document.getElementById("menu-container");
      container.innerHTML = "";
      menuArray.forEach(item => {
        const div = document.createElement("div");
        div.classList.add("menu-item");
        div.innerHTML = `
          <img src="${item.img}" alt="${item.name}" class="menu-img" />
          <h4>${item.name}</h4>
          <p>RM ${item.price.toFixed(2)}</p>
          <button onclick='addToCart("${item.name}", ${item.price})'>Add to Cart</button>
        `;
        container.appendChild(div);
      });
    }

    function addToCart(name, price) {
      cart.push({ name, price });
      updateCart();
    }

    function removeItem(index) {
      cart.splice(index, 1);
      updateCart();
    }

    function updateCart() {
      document.getElementById("cart-count").textContent = cart.length;
      const cartItems = document.getElementById("cart-items");
      cartItems.innerHTML = "";
      let total = 0;
      cart.forEach((item, index) => {
        total += item.price;
        const li = document.createElement("li");
        li.innerHTML = `${item.name} - RM ${item.price.toFixed(2)} 
          <button class="remove-btn" onclick="removeItem(${index})">X</button>`;
        cartItems.appendChild(li);
      });
      document.getElementById("cart-total").textContent = total.toFixed(2);
    }

    function toggleCart() {
      document.getElementById("cart-panel").classList.toggle("show");
    }

    // ‚úÖ FIXED checkout(): WhatsApp message keluar lengkap & kemas
    function checkout() {
      if (cart.length === 0) return alert("Cart is empty!");

      const remarks = document.getElementById("remarks").value.trim();

      let message = "Hello Smash & Co.! I'd like to order:\n\n";
      cart.forEach(item => {
        message += `‚Ä¢ ${item.name} (RM ${item.price.toFixed(2)})\n`;
      });

      const total = cart.reduce((sum, i) => sum + i.price, 0).toFixed(2);
      message += `\nTotal: RM ${total}`;
      if (remarks) {
        message += `\n\nRemarks: ${remarks}`;
      }

      const encodedMessage = encodeURIComponent(message);
      const phone = "60175426478";
      const url = `https://wa.me/${phone}?text=${encodedMessage}`;
      window.open(url, "_blank");
    }

    function showMenu(type) {
      document.getElementById("burger-btn").classList.remove("active");
      document.getElementById("set-btn").classList.remove("active");

      if (type === "burger") {
        document.getElementById("burger-btn").classList.add("active");
        renderMenu(burgerMenu);
      } else {
        document.getElementById("set-btn").classList.add("active");
        renderMenu(setMenu);
      }
    }

    document.getElementById("search").addEventListener("input", (e) => {
      const term = e.target.value.toLowerCase();
      const active = document.querySelector(".menu-tabs button.active").id;
      const currentMenu = active === "burger-btn" ? burgerMenu : setMenu;
      const filtered = currentMenu.filter(i => i.name.toLowerCase().includes(term));
      renderMenu(filtered);
    });

    renderMenu(burgerMenu);
  </script>
</body>
</html>
